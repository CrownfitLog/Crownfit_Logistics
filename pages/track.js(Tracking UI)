// pages/track.js
import { useState } from 'react';

export default function Track() {
  const [number, setNumber] = useState('');
  const [res, setRes] = useState(null);
  const [loading, setLoading] = useState(false);

  async function search(e) {
    e?.preventDefault();
    setLoading(true);
    const r = await fetch(`/api/track?number=${encodeURIComponent(number)}`);
    const j = await r.json();
    setRes(j);
    setLoading(false);
  }

  return (
    <div className="min-h-screen flex items-center justify-center p-6 bg-gray-50">
      <div className="w-full max-w-3xl bg-white p-6 rounded shadow">
        <h2 className="text-xl font-bold">Track Shipment (AWB / B/L)</h2>
        <form onSubmit={search} className="mt-4 flex gap-2">
          <input value={number} onChange={(e)=>setNumber(e.target.value)} className="flex-1 border p-2 rounded" placeholder="Enter tracking number (AWB or B/L)"/>
          <button disabled={loading} className="px-4 py-2 bg-blue-600 text-white rounded">{loading ? '...' : 'Track'}</button>
        </form>

        {res && (
          <div className="mt-6">
            <h3 className="font-semibold">Result</h3>
            <pre className="text-sm bg-gray-100 p-4 rounded">{JSON.stringify(res, null, 2)}</pre>
          </div>
        )}

      </div>
    </div>
  );
}
